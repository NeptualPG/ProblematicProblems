{% extends 'main.html' %}

{% block content %}


<!-- los nosmbres que se usaron son de la plantilla que agarre, no los he cambiado, pero puedo hacerlo si quieres un codigo mas pretty or clear-->
<!-- Pestañas para elegir entre Login y Register -->
<ul class="nav nav-pills nav-justified mb-3" id="ex1" role="tablist">

    <li class="nav-item" role="presentation">
    <a class="nav-link {% if page == 'login' %}active{% endif %}" id="tab-login" data-mdb-pill-init href="#pills-login" role="tab"
        aria-controls="pills-login" aria-selected="true">Login</a>
    </li>

    <li class="nav-item" role="presentation">
    <a class="nav-link {% if page == 'register' %}active{% endif %}" id="tab-register" data-mdb-pill-init href="#pills-register" role="tab"
        aria-controls="pills-register" aria-selected="false">Register</a>
    </li>

    </ul>

    <!-- Contenido de las Pestañas -->
    <div class="tab-content">

    <!-- LOGIN  -->
    <div class="tab-pane fade {% if page == 'login' %}show active{% endif %}" id="pills-login" role="tabpanel" aria-labelledby="tab-login">
    <form method="POST" action="{% url 'login' %}">
        {% csrf_token %}

        <!-- Muestra mensajes de error si los hay (para el login) -->
        {% if page == 'login' and messages %}
        <div class="alert alert-danger">
            {% for message in messages %}
                <p>{{ message }}</p>
            {% endfor %}
        </div>
        {% endif %}

        <div data-mdb-input-init class="form-outline mb-4">
        <input type="text" name="username" id="loginName" class="form-control" required/>
        <label class="form-label" for="loginName">Username</label>
        </div>

        <div data-mdb-input-init class="form-outline mb-4">
        <input type="password" name="password" id="loginPassword" class="form-control" required/>
        <label class="form-label" for="loginPassword">Password</label>
        </div>

        <button type="submit" class="btn btn-primary btn-block mb-4">Sign in</button>
    </form>
    </div>

    <!-- register  -->
    <div class="tab-pane fade {% if page == 'register' %}show active{% endif %}" id="pills-register" role="tabpanel" aria-labelledby="tab-register">

    <!-- Este formulario ahora está escrito "a mano" y no usa la variable {{form}}, es decir si cambias o agrega algo en el nackend para mejorar el login me tendras que decir que es -->
    <form method="POST" action="{% url 'register' %}">
        {% csrf_token %} <!-- obligao papa -->

        {% if page == 'register' and messages %}
        <div class="alert alert-danger">
            {% for message in messages %}
                <p>{{ message }}</p>
            {% endfor %}
        </div>
        {% endif %}

        <!--Campo Username -->
        <div data-mdb-input-init class="form-outline mb-4">
        <input type="text" name="username" id="registerUsername" class="form-control" required />
        <label class="form-label" for="registerUsername">Username</label>
        </div>

        <!-- Campo Password -->
        <div data-mdb-input-init class="form-outline mb-4">
        <input type="password" name="password" id="registerPassword" class="form-control" required />
        <label class="form-label" for="registerPassword">Password</label>
        </div>

        <!-- Campo Repeat Password -->
        <div data-mdb-input-init class="form-outline mb-4">
        <input type="password" name="password2" id="registerRepeatPassword" class="form-control" required />
        <label class="form-label" for="registerRepeatPassword">Repeat password</label>
        </div>

        <button type="submit" class="btn btn-primary btn-block mb-3">Register</button>
        
        <div class="text-center">
        <p>Already a member? <a href="{% url 'login' %}">Login</a></p>
        </div>
    </form>
    </div>
</div>

{% endblock content %}
